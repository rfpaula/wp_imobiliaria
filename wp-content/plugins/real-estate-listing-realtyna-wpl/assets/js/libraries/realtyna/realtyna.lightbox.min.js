/*!
 Realtyna Lightbox Plugin
 @Author Steve M. @ Realtyna UI Department
 @Copyright 2015 Realtyna Inc.
 @license Realtyna Inc.
 @Version 1.9.6.6
 */
(function(c,b,a,d){c._realtyna.fn.lightbox=function(){var q={minWidth:200,minHeight:130,maxWidth:9999,maxHeight:9999,width:800,height:500,title:"",autoSize:true,zIndex:500001,position:"center",showLoading:true,reloadPage:false,clearContent:true,multiple:false,closeOnOverlay:true,loading:{color:"#000"},addTo:"body",overlayClass:"",wrapperClass:"",contentClass:"",closeClass:"",ajaxType:"POST",ajaxDataType:"html",ajaxData:d,ajaxURL:d,cssClasses:{lock:"realtyna-lightbox-lock",overlay:"realtyna-lightbox-overlay",wrap:"realtyna-lightbox-wp",title:"realtyna-lightbox-title",content:"realtyna-lightbox-cnt",close:"realtyna-lightbox-close-btn",error:"realtyna-lightbox-error",ajax:"realtyna-lightbox-ajax",placeholder:"realtyna-lightbox-placeholder",textOnlyWrap:"realtyna-lightbox-text-wrap",textOnlyContainer:"realtyna-lightbox-text-cnt",rightPos:"realtyna-lightbox-right-pos"},effects:{fadeIn:"wpl-fx-fadeIn",fadeOut:"wpl-fx-fadeOut",showOverlay:"wpl-fx-fadeIn",showBox:"wpl-fx-fadeInBottom",hideBox:"wpl-fx-fadeOutBottom"},errors:{notFound:"Selected content not found!",unexpected:"An unexpected error happen. Please try again."},callbacks:{beforeOpen:function(){},afterOpen:function(){},afterShow:function(){},afterClose:function(){}}};var x=this,u=null,i=Realtyna,s=null,t={},I=null,f=null,j=null,w=false,k=false,E=false,G=null,n=null,v=null,D=null,p=null,A=null,K=null,C=null,F=null,r=null,h="inline",e={overlay:"realtyna-js-lightbox-overlay",wrap:"realtyna-js-lightbox-wrapper",content:"realtyna-js-lightbox-content",closeBtn:"realtyna-js-lightbox-close"};var m=c._realtyna.lightbox.fn={};m._beforeOpen=[];m._afterOpen=[];m._afterShow=[];m._afterClose=[];m.open=function(L){L=L;E=true;t=L.data("realtyna-lightbox-obj-opts");I=t.cssClasses;f=t.effects;j=I.placeholder;o(L,function(){h=y(L);switch(h){case"inline":z(L);break;case"ajax":H(L);break;default:return false}})};m.trigger=function(M){var O=t.callbacks,L=m["_"+M];if(O.hasOwnProperty(M)&&O[M]!==null){L.unshift(O[M])}for(var N=0;N<L.length;++N){L[N].call()}return true};m.getInlineOptions=function(L){if(!L){return false}return i.options2JSON(L)};m._error=function(M,L){K=c("<div/>").text(L).addClass(I.error);K.invisible().appendTo(D);w=true;m.trigger("beforeOpen");l(M);n.unbind("onShow").bind("onShow",function(){K.visible().hide().fadeIn();i.ajaxLoader.hide(p);m.trigger("afterShow");E=false;k=true})};function g(M){var L=M.data("realtyna-lightbox-obj-opts"),N=m.getInlineOptions(M.attr("data-realtyna-lightbox-opts"));return c.extend(true,{},L,N)}function o(L,M){c("html").addClass(I.lock);G=c("<div />").attr("id",e.overlay).addClass(i.getClass(I.overlay,t.overlayClass)).css({zIndex:t.zIndex});n=c("<div />").attr("id",e.wrap).addClass(i.getClass(I.wrap,t.wrapperClass));n.appendTo(G).addClass((t.position=="center")?f.showBox:I.rightPos);v=c("<div />").attr("id",e.closeBtn).addClass(i.getClass(I.close,t.closeClass));v.hide().appendTo(n);D=c("<div />").attr("id",e.content).addClass(i.getClass(I.content,t.contentClass));D.appendTo(n);G.appendTo(t.addTo);B(L);m.trigger("beforeOpen");l(L);if(t.showLoading){p=i.ajaxLoader.show(n,"normal","center",false,t.loading.color)}M.call()}function l(R){var M=i.getBrowserSizes().browser(),Q,P,L,O;t=g(R);if(w){var N=K.css("position");K.css({position:"absolute"});if(t.autoSize){O=K.not("script, style").eq(0).outerWidth();L=K.not("script, style").eq(0).outerHeight()}else{O=t.width;L=t.height}K.css({position:(N==="static")?"":N});if(t.position=="center"){O=Math.min(O+2,t.maxWidth);L=Math.min(L+2,t.maxHeight);O=Math.max(O,t.minWidth);L=Math.max(L,t.minHeight);Q=M.width/2-O/2;P=Math.max(M.height/2-L/2,40);if(!k){n.animate({left:Q,top:P,width:O,height:L},450);setTimeout(function(){if(L>t.minHeight){L=(t.autoSize)?"auto":L}n.css({height:L});G.css({overflowY:"auto"});n.trigger("onShow");m.trigger("afterOpen")},600)}else{n.css({height:(t.autoSize)?"auto":L,left:Q,top:P,width:O})}}else{if(t.position=="right"){P=0;if(c("#wpadminbar").length){P=c("#wpadminbar").outerHeight()}n.css({left:"100%",top:P,height:(P===0)?"100%":"calc(100% - "+P+"px)",width:O}).animate({marginLeft:"-"+O},450);setTimeout(function(){n.trigger("onShow");m.trigger("afterOpen")},600)}}}else{if(t.position=="center"){n.css({width:100,height:100,left:M.width/2-50,top:M.height/2-50})}else{if(t.position=="right"){n.css({width:100,height:"100%",left:"100%",top:0}).animate({marginLeft:-100},100)}}}return true}function y(M){var L;if(typeof M.attr("href")!="undefined"){L=M.attr("href")}else{if(typeof M.attr("data-realtyna-href")!="undefined"){L=M.attr("data-realtyna-href")}else{c._realtyna.lightbox.close()}}if(L.length>0){if(L[0]=="#"){return"inline"}else{return"ajax"}}}function B(L){c(G).on("click.realtyna-lightbox",function(N){var M=c(N.target);if(t.closeOnOverlay&&!M.hasClass(I.wrap)&&M.parents("#"+e.wrap).length==0){x.close()}});c(v).on("click.realtyna-lightbox",function(M){M.preventDefault();x.close()});c(b).on("resize.realtyna-lightbox",function(){b.resizeEvt;c(b).on("resize.realtyna-lightbox",function(){if(t.position!=="right"){clearTimeout(b.resizeEvt);b.resizeEvt=setTimeout(function(){l(L)},250)}})});c(a).on("keydown.realtyna-lightbox",function(M){if(t.closeOnOverlay&&(M.which||M.keyCode)===27){M.preventDefault();x.close()}})}function J(){c(b).off("resize.realtyna-lightbox");c(a).off("keydown.realtyna-lightbox")}function z(M){var L=/^#[a-z]+[\w-]*$/gi;F=M.attr("href")||M.attr("data-realtyna-href");if(!L.test(F)){return}A=c(F);if(A.length===0){m._error(M,t.errors.notFound);return}if(!A.data(j)){A.data(j,c('<div class="'+j+'"></div>').insertAfter(A).hide())}A=A.show().invisible().detach();w=true;c(D).append(A);n.bind("onReset",function(){if(c(this).find(A).length){if(t.autoSize){n.height(A.outerHeight())}A.hide().replaceAll(A.data(j)).data(j,false);if(t.clearContent){A.html("")}}});n.bind("onShow",function(){A.visible().hide().fadeIn();v.fadeIn();i.ajaxLoader.hide(p);E=false;k=true;m.trigger("afterShow")});r=setInterval(function(){if(A.html().length>0){clearInterval(r);if(A.children().length==0){A.wrapInner('<div class="'+t.cssClasses.textOnlyContainer+'"/>');A.prepend('<h2 class="'+t.cssClasses.title+'">'+t.title+"</h2>");A.wrapInner('<div class="'+t.cssClasses.textOnlyWrap+'"/>')}if(A.find("."+t.cssClasses.title).length!=0&&A.find("."+t.cssClasses.textOnlyContainer).length==0){A.wrapInner('<div class="'+t.cssClasses.textOnlyContainer+'"/>')}if(A.find("."+t.cssClasses.title).length==0&&A.find("h2").length==0){A.prepend('<h2 class="'+t.cssClasses.title+'">'+t.title+"</h2>")}if(A.find("."+t.cssClasses.textOnlyWrap).length==0){A.wrapInner('<div class="'+t.cssClasses.textOnlyWrap+'"/>')}K=A.children();l(M)}},300)}function H(M){var L=M.attr("data-realtyna-lightbox-data")||{};if(typeof t.ajaxData!="undefined"){L=t.ajaxData}F=M.attr("href")||M.attr("data-realtyna-href");if(typeof t.ajaxURL!="undefined"){F=t.ajaxURL}c.ajax({type:t.ajaxType,dataType:t.ajaxDataType,url:F,data:L,error:function(N,O){m._error(M,t.errors.unexpected)},success:function(N,O){if(O==="success"){A=c("<div/>").addClass(I.ajax).html(N);K=A.children();w=true;m.trigger("beforeOpen");D.append(A.show().invisible());l(M)}}});n.bind("onShow",function(){A.visible().hide().fadeIn();v.fadeIn();i.ajaxLoader.hide(p);E=false;k=true;m.trigger("afterShow")})}this.initialize=function(L,N,M){u=M;if(typeof N!="undefined"&&N){u.each(function(){if(!c(this).data("realtyna-lightbox-obj-opts")){var O=c.extend(true,{},q,L),P=m.getInlineOptions(c(this).attr("data-realtyna-lightbox-opts"));O=c.extend(true,{},O,P);c(this).data("realtyna-lightbox-obj-opts",O);c(this).on("click.realtyna-lightbox",function(Q){if(!E){Q.preventDefault();m.open(c(this),Q)}})}})}return this};this.open=function(M,N){var L=N||{};u=i.isQuery(M)?M:c(M);x.initialize(L,true,u);return m.open(u)};this.close=function(){if(w){n.trigger("onReset");w=false;k=false;E=false;m._beforeOpen=[];m._afterOpen=[];m._afterShow=[];m._afterClose=[];c(n).removeClass(f.showBox+" "+t.position);if(t.position=="center"){c(n).addClass(f.hideBox)}else{if(t.position=="right"){c(n).animate({marginleft:0},450)}}c(G).fadeOut(600,function(){J();c(this).remove();m.trigger("afterClose");c("html").removeClass(I.lock);if(t.reloadPage){location.reload()}});return true}return false};this.on=function(N,M){var L="_"+N;if(m.hasOwnProperty(L)){m[L].push(M)}return true}};c._realtyna.lightbox=(function(){var e;return{version:"1.9.6.6",init:function(g,f){if(!g){return false}if(!e){e=new c._realtyna.fn.lightbox();this.open=e.open;this.on=e.on;this.close=e.close}return e.initialize(f,true,g)},initObject:function(){if(!e){e=new c._realtyna.fn.lightbox();this.open=e.open;this.on=e.on;this.close=e.close}return e},open:null,on:null,close:null}})()})(jQuery,window,document);